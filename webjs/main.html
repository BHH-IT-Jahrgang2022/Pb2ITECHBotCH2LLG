<!DOCTYPE html>
<html>
<head>
    <title>Chat Page</title>
    <style>
        #chat-icon {
            cursor: pointer;
            width: 50px;
            height: 50px;
            background: url('chat-icon.png');
        }
        #chat-popup {
            display: none;
            position: fixed;
            bottom: 0;
            right: 0;
            width: 300px;
            height: 400px;
            border: 1px solid black;
            padding: 10px;
            background-color: white;
        }
    </style>
</head>
<body>
    <div id="chat-icon"></div>
    <div id="chat-popup">
        <div id="messages"></div>
        <form id="message-form">
            <input type="text" id="message-input">
            <button type="submit">Send</button>
        </form>
    </div>

    <script>
        var chatIcon = document.getElementById('chat-icon');
        var chatPopup = document.getElementById('chat-popup');
        var messageForm = document.getElementById('message-form');
        var messageInput = document.getElementById('message-input');
        var messagesDiv = document.getElementById('messages');
        var ws;

        chatIcon.addEventListener('click', function() {
            chatPopup.style.display = 'block';
            ws = new WebSocket('wss://api.bot.demo.pinguin-it.de/chat');

            ws.onopen = function() {
                console.log('WebSocket is connected.');
            };

            ws.onmessage = function(e) {
                var p = document.createElement('p');
                p.textContent = 'Received: ' + e.data;
                messagesDiv.appendChild(p);
            };

            ws.onerror = function(e) {
                console.log('Error occurred: ' + e.message);
            };

            ws.onclose = function() {
                console.log('WebSocket connection closed.');
            };
        });

        messageForm.addEventListener('submit', function(e) {
            e.preventDefault();
            var message = messageInput.value;
            ws.send(message);
            messageInput.value = '';
        });
    </script>
</body>
</html>
